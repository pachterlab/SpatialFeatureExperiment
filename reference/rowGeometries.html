<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Row geometry getters and setters — rowGeometries • SpatialFeatureExperiment</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Row geometry getters and setters — rowGeometries"><meta name="description" content="rowGeometries are geometries that corresponding to rows of the gene
count matrix, such as smFISH transcript spots. The txSpots() function
is a convenience wrapper for transcript spots, although this entirely depends
on the rowGeometry being named txSpots."><meta property="og:description" content="rowGeometries are geometries that corresponding to rows of the gene
count matrix, such as smFISH transcript spots. The txSpots() function
is a convenience wrapper for transcript spots, although this entirely depends
on the rowGeometry being named txSpots."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SpatialFeatureExperiment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.8.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/seurat_sfe_coerce.html">Seurat_to_SFE</a></li>
    <li><a class="dropdown-item" href="../articles/SFE.html">Introduction to the SpatialFeatureExperiment class</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pachterlab/SpatialFeatureExperiment/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Row geometry getters and setters</h1>
      <small class="dont-index">Source: <a href="https://github.com/pachterlab/SpatialFeatureExperiment/blob/documentation/R/dimGeometries.R" class="external-link"><code>R/dimGeometries.R</code></a></small>
      <div class="d-none name"><code>rowGeometries.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>rowGeometries</code> are geometries that corresponding to rows of the gene
count matrix, such as smFISH transcript spots. The <code>txSpots()</code> function
is a convenience wrapper for transcript spots, although this entirely depends
on the <code>rowGeometry</code> being named <code>txSpots</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rowGeometry</span><span class="op">(</span><span class="va">x</span>, type <span class="op">=</span> <span class="fl">1L</span>, sample_id <span class="op">=</span> <span class="fl">1L</span>, withDimnames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rowGeometry</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  type <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  sample_id <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  withDimnames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  partial <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  translate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">rowGeometries</span><span class="op">(</span><span class="va">x</span>, sample_id <span class="op">=</span> <span class="st">"all"</span>, withDimnames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rowGeometries</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  sample_id <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  withDimnames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  partial <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  translate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">rowGeometryNames</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rowGeometryNames</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">txSpots</span><span class="op">(</span><span class="va">x</span>, sample_id <span class="op">=</span> <span class="fl">1L</span>, withDimnames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">txSpots</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  sample_id <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  withDimnames <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  partial <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  translate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>SpatialFeatureExperiment</code> object.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>An integer specifying the index or string specifying the name of
the *Geometry to query or replace. If missing, then the first item in the
*Geometries will be returned or replaced.</p></dd>


<dt id="arg-sample-id">sample_id<a class="anchor" aria-label="anchor" href="#arg-sample-id"></a></dt>
<dd><p>Sample ID to get or set geometries.</p></dd>


<dt id="arg-withdimnames">withDimnames<a class="anchor" aria-label="anchor" href="#arg-withdimnames"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, then the dimnames (colnames or
rownames) of the gene count matrix should correspond to row names of the
<code>sf</code> data frames of interest.</p></dd>


<dt id="arg-partial">partial<a class="anchor" aria-label="anchor" href="#arg-partial"></a></dt>
<dd><p>In setters, if a <code>rowGeometry</code> of the same name exists,
whether to only replace the rows present in <code>value</code>.</p></dd>


<dt id="arg-translate">translate<a class="anchor" aria-label="anchor" href="#arg-translate"></a></dt>
<dd><p>Logical. Only used if <code><a href="removeEmptySpace.html">removeEmptySpace</a></code> has
been run of the SFE object. If that's the case, this argument indicates
whether the new value to be assigned to the geometry is in the coordinates
prior to removal of empty space so it should be translated to match the new
coordinates after removing empty space. Default to <code>TRUE</code>.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>Value to set. For <code>dimGeometry</code>, must be a <code>sf</code> data
frame with the same number of rows as size in the dimension of interest, or
an ordinary data frame that can be converted to such a <code>sf</code> data frame
(see <code><a href="df2sf.html">df2sf</a></code>). For <code>dimGeometries</code>, must be a list of such
<code>sf</code> or ordinary data frames.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When there are multiple samples in the SFE object, <code>rowGeometries</code> for
each sample has the <code>sample_id</code> appended to the name of the geometry.
For example, if the name is <code>txSpots</code> and the sample ID is
<code>sample01</code>, then the actual name of the <code>rowGeometry</code> is
<code>txSpots_sample01</code>. In the getter, one can still specify
<code>rowGeometry(sfe, "txSpots", sample_id = "sample01")</code>.</p>
<p>Appending the <code>sample_id</code> is unnecessary when there is only one sample,
but <code>sample_id</code> will be appended when to SFE objects are combined with
<code>cbind</code>. It is necessary to distinguish bewteen different samples
because they can have overlapping coordinate values.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>[dimGeometries()], [colGeometries()]</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pachterlab/SFEData" class="external-link">SFEData</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/aoles/RBioFormats" class="external-link">RBioFormats</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dir_use</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SFEData/man/XeniumOutput.html" class="external-link">XeniumOutput</a></span><span class="op">(</span><span class="st">"v2"</span>, file_path <span class="op">=</span> <span class="va">fp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> see ?SFEData and browseVignettes('SFEData') for documentation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> loading from cache</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The downloaded files are in /tmp/RtmpgNzKQ4/file8306497f5aff/xenium2 </span>
<span class="r-in"><span><span class="co"># RBioFormats issue</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">sfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="readXenium.html">readXenium</a></span><span class="op">(</span><span class="va">dir_use</span>, add_molecules <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Must use gene symbols as row names when adding transcript spots.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Cell segmentations are found in `.parquet` file(s)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell and nucleus segmentations</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Making MULTIPOLYGON nuclei geometries</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Making POLYGON cell geometries</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sanity checks on cell segmentation polygons:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; ..found 132 cells with (nested) polygon lists</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; ..applying filtering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Checking polygon validity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Saving geometries to parquet files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell metadata -&gt; `cells.parquet`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading h5 gene count matrix</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering cellSeg geometries to match 6272 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering nucSeg geometries to match 6158 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading transcript coordinates</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Converting transcript spots to geometry</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Writing reformatted transcript spots to disk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Total of 116 features/genes with no transcript detected or `min_phred` &lt; 20 are removed from SFE object</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; To keep all features -&gt; set `min_phred = NULL`</span>
<span class="r-in"><span><span class="va">sfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="readXenium.html">readXenium</a></span><span class="op">(</span><span class="va">dir_use</span>, add_molecules <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Must use gene symbols as row names when adding transcript spots.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Preprocessed sf segmentations found</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell and nucleus segmentations</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell metadata -&gt; `cells.parquet`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading h5 gene count matrix</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering cellSeg geometries to match 6272 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering nucSeg geometries to match 6158 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading transcript coordinates</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Total of 116 features/genes with no transcript detected or `min_phred` &lt; 20 are removed from SFE object</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; To keep all features -&gt; set `min_phred = NULL`</span>
<span class="r-in"><span><span class="fu">rowGeometries</span><span class="op">(</span><span class="va">sfe</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of length 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> names(1): txSpots</span>
<span class="r-in"><span><span class="fu">rowGeometryNames</span><span class="op">(</span><span class="va">sfe</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "txSpots"</span>
<span class="r-in"><span><span class="va">tx</span> <span class="op">&lt;-</span> <span class="fu">rowGeometry</span><span class="op">(</span><span class="va">sfe</span>, <span class="st">"txSpots"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">txSpots</span><span class="op">(</span><span class="va">sfe</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 398 features and 2 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: MULTIPOINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XYZ</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 0.001159668 ymin: -1008.098 xmax: 1026.159 ymax: -4.473946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> z_range:       zmin: 13.56251 zmax: 27.21318</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CRS:           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> First 10 features:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            gene codeword_index                       geometry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ABCC11   ABCC11             87 MULTIPOINT Z ((111.2996 -47...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ACE2       ACE2             31 MULTIPOINT Z ((204.9438 -21...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ACKR1     ACKR1            349 MULTIPOINT Z ((8.244019 -88...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ACTA2     ACTA2            342 MULTIPOINT Z ((4.195129 -40...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ACTG2     ACTG2            231 MULTIPOINT Z ((6.257874 -30...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ADAM28   ADAM28            119 MULTIPOINT Z ((0.2313232 -4...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ADAMTS1 ADAMTS1            242 MULTIPOINT Z ((5.13385 -321...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ADGRE1   ADGRE1             24 MULTIPOINT Z ((119.8132 -7....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ADGRL4   ADGRL4            132 MULTIPOINT Z ((4.375183 -32...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ADH1C     ADH1C             92 MULTIPOINT Z ((1.244507 -59...</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">dir_use</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lambda Moses, Alik Huseynov, Lior Pachter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

