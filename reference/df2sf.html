<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>From ordinary data frame to sf to construct SFE object — df2sf • SpatialFeatureExperiment</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="From ordinary data frame to sf to construct SFE object — df2sf"><meta name="description" content="While the SpatialFeatureExperiment constructor and *Geometry
replacement methods can convert properly formatted ordinary data frames into
sf objects which are used to store the geometries internally, the user
might want to do the conversion, check if the geometry is valid, and inspect
and fix any invalid geometries."><meta property="og:description" content="While the SpatialFeatureExperiment constructor and *Geometry
replacement methods can convert properly formatted ordinary data frames into
sf objects which are used to store the geometries internally, the user
might want to do the conversion, check if the geometry is valid, and inspect
and fix any invalid geometries."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SpatialFeatureExperiment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.8.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/seurat_sfe_coerce.html">Seurat_to_SFE</a></li>
    <li><a class="dropdown-item" href="../articles/SFE.html">Introduction to the SpatialFeatureExperiment class</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pachterlab/SpatialFeatureExperiment/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>From ordinary data frame to sf to construct SFE object</h1>
      <small class="dont-index">Source: <a href="https://github.com/pachterlab/SpatialFeatureExperiment/blob/documentation/R/df2sf.R" class="external-link"><code>R/df2sf.R</code></a></small>
      <div class="d-none name"><code>df2sf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>While the <code>SpatialFeatureExperiment</code> constructor and <code>*Geometry</code>
replacement methods can convert properly formatted ordinary data frames into
<code>sf</code> objects which are used to store the geometries internally, the user
might want to do the conversion, check if the geometry is valid, and inspect
and fix any invalid geometries.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">df2sf</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  spatialCoordsNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,</span>
<span>  spotDiameter <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  geometryType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POINT"</span>, <span class="st">"LINESTRING"</span>, <span class="st">"POLYGON"</span>, <span class="st">"MULTIPOINT"</span>, <span class="st">"MULTILINESTRING"</span>,</span>
<span>    <span class="st">"MULTIPOLYGON"</span><span class="op">)</span>,</span>
<span>  group_col <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>  subid_col <span class="op">=</span> <span class="st">"subID"</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>An ordinary data frame, i.e. not <code>sf</code>. Or a matrix that can be
converted to a data frame.</p></dd>


<dt id="arg-spatialcoordsnames">spatialCoordsNames<a class="anchor" aria-label="anchor" href="#arg-spatialcoordsnames"></a></dt>
<dd><p>Column names in <code>df</code> that specify spatial
coordinates.</p></dd>


<dt id="arg-spotdiameter">spotDiameter<a class="anchor" aria-label="anchor" href="#arg-spotdiameter"></a></dt>
<dd><p>Spot diameter for technologies with arrays of spots of
fixed diameter per slide, such as Visium, ST, DBiT-seq, and slide-seq. The
diameter must be in the same unit as the coordinates in the *Geometry
arguments. Ignored for geometries that are not POINT or MULTIPOINT.</p></dd>


<dt id="arg-geometrytype">geometryType<a class="anchor" aria-label="anchor" href="#arg-geometrytype"></a></dt>
<dd><p>Type of geometry to convert the ordinary data frame to.
If the geometry in <code>df</code> is de facto points, then this argument will be
ignored and the returned <code>sf</code> will have geometry type POINT.</p></dd>


<dt id="arg-group-col">group_col<a class="anchor" aria-label="anchor" href="#arg-group-col"></a></dt>
<dd><p>Column to indicate which coordinates for which MULTI
geometry, such as to identify which MULTIPOLYGON or MULTIPOINT.</p></dd>


<dt id="arg-id-col">id_col<a class="anchor" aria-label="anchor" href="#arg-id-col"></a></dt>
<dd><p>Column to indicate coordinates for which geometry, within a
MULTI geometry if applicable, such as to identify which POLYGON or which
polygon within a MULTIPOLYGON.</p></dd>


<dt id="arg-subid-col">subid_col<a class="anchor" aria-label="anchor" href="#arg-subid-col"></a></dt>
<dd><p>Column to indicate coordinates for holes in polygons.</p></dd>


<dt id="arg-check">check<a class="anchor" aria-label="anchor" href="#arg-check"></a></dt>
<dd><p>Logical, whether to check the input data frame for issues
related to constructing the geometry of interese such as number of vertices
per geometry. If <code>FALSE</code>, it will save a bit of time, which is useful
when the input is already known to be good.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed to `sf::st_buffer`, mainly to make polygon shapes,
eg Visium spot `endCapStyle = "ROUND"` and VisiumHD bin `endCapStyle = "SQUARE"`</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>sf</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Points, use spotDiameter to convert to circle polygons</span></span></span>
<span class="r-in"><span><span class="co"># This is done to Visium spots</span></span></span>
<span class="r-in"><span><span class="va">pts_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/pts_df.rds"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"SpatialFeatureExperiment"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_use</span> <span class="op">&lt;-</span> <span class="fu">df2sf</span><span class="op">(</span><span class="va">pts_df</span>, geometryType <span class="op">=</span> <span class="st">"POINT"</span>, spotDiameter <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Linestring</span></span></span>
<span class="r-in"><span><span class="va">ls_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ls_df.rds"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"SpatialFeatureExperiment"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_use</span> <span class="op">&lt;-</span> <span class="fu">df2sf</span><span class="op">(</span><span class="va">ls_df</span>, geometryType <span class="op">=</span> <span class="st">"LINESTRING"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Polygon</span></span></span>
<span class="r-in"><span><span class="va">pol_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/pol_df.rds"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"SpatialFeatureExperiment"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_use</span> <span class="op">&lt;-</span> <span class="fu">df2sf</span><span class="op">(</span><span class="va">pol_df</span>,</span></span>
<span class="r-in"><span>    geometryType <span class="op">=</span> <span class="st">"POLYGON"</span>,</span></span>
<span class="r-in"><span>    spatialCoordsNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="st">"V2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Multipolygon</span></span></span>
<span class="r-in"><span><span class="va">mpol_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/mpol_df.rds"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"SpatialFeatureExperiment"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_use</span> <span class="op">&lt;-</span> <span class="fu">df2sf</span><span class="op">(</span><span class="va">mpol_df</span>,</span></span>
<span class="r-in"><span>    geometryType <span class="op">=</span> <span class="st">"MULTIPOLYGON"</span>,</span></span>
<span class="r-in"><span>    spatialCoordsNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V1"</span>, <span class="st">"V2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Multiple sample_ids present</span></span></span>
<span class="r-in"><span><span class="va">multipts_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/multipts_df.rds"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"SpatialFeatureExperiment"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf_use</span> <span class="op">&lt;-</span> <span class="fu">df2sf</span><span class="op">(</span><span class="va">multipts_df</span>, geometryType <span class="op">=</span> <span class="st">"MULTIPOINT"</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lambda Moses, Alik Huseynov, Lior Pachter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

