<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Image setter — Img&lt;-,SpatialExperiment-method • SpatialFeatureExperiment</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Image setter — Img&lt;-,SpatialExperiment-method"><meta name="description" content="Modify or replace images stored in a SpatialExperiment object. This is
different from addImg which adds the image from files and can't
replace existing images, which is there to be consistent with
SpatialExperiment. This setter here can replace existing images with
another object that inherits from VirtualSpatialImage, including
SpatRasterImage, BioFormatsImage, and
ExtImage."><meta property="og:description" content="Modify or replace images stored in a SpatialExperiment object. This is
different from addImg which adds the image from files and can't
replace existing images, which is there to be consistent with
SpatialExperiment. This setter here can replace existing images with
another object that inherits from VirtualSpatialImage, including
SpatRasterImage, BioFormatsImage, and
ExtImage."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SpatialFeatureExperiment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.8.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/seurat_sfe_coerce.html">Seurat_to_SFE</a></li>
    <li><a class="dropdown-item" href="../articles/SFE.html">Introduction to the SpatialFeatureExperiment class</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pachterlab/SpatialFeatureExperiment/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Image setter</h1>
      <small class="dont-index">Source: <a href="https://github.com/pachterlab/SpatialFeatureExperiment/blob/documentation/R/image.R" class="external-link"><code>R/image.R</code></a></small>
      <div class="d-none name"><code>Img-set-SpatialExperiment-method.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Modify or replace images stored in a <code>SpatialExperiment</code> object. This is
different from <code>addImg</code> which adds the image from files and can't
replace existing images, which is there to be consistent with
<code>SpatialExperiment</code>. This setter here can replace existing images with
another object that inherits from <code>VirtualSpatialImage</code>, including
<code><a href="SpatRasterImage.html">SpatRasterImage</a></code>, <code><a href="BioFormatsImage.html">BioFormatsImage</a></code>, and
<code><a href="ExtImage.html">ExtImage</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'SpatialExperiment'</span></span>
<span><span class="fu">Img</span><span class="op">(</span><span class="va">x</span>, sample_id <span class="op">=</span> <span class="fl">1L</span>, <span class="va">image_id</span>, scale_fct <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>SpatialExperiment</code> object, which includes SFE.</p></dd>


<dt id="arg-sample-id">sample_id<a class="anchor" aria-label="anchor" href="#arg-sample-id"></a></dt>
<dd><p>Which sample the image is associated with. Use
<code><a href="sampleIDs.html">sampleIDs</a></code> to get sample IDs present in the SFE object.</p></dd>


<dt id="arg-image-id">image_id<a class="anchor" aria-label="anchor" href="#arg-image-id"></a></dt>
<dd><p>Image ID, such as "lowres" and "hires" for Visium data and
"DAPI" and "PolyT" for Vizgen MERFISH data.</p></dd>


<dt id="arg-scale-fct">scale_fct<a class="anchor" aria-label="anchor" href="#arg-scale-fct"></a></dt>
<dd><p>Scale factor to convert pixels in lower resolution to those
in the full resolution. Only relevant to image classes implemented in
<code>SpatialExperiment</code> but not <code>SpatialFeatureExperiment</code> because
the spatial extent of images in SFE takes precedence.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>New version of image to add, must inherit from
<code>VirtualSpatialImage</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>SFE object with the new image added.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/aoles/EBImage" class="external-link">EBImage</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘EBImage’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:SpatialFeatureExperiment’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     affine, rotate, translate, transpose</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pachterlab/SFEData" class="external-link">SFEData</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/aoles/RBioFormats" class="external-link">RBioFormats</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> BioFormats library version 7.3.0</span>
<span class="r-in"><span><span class="va">fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SFEData/man/XeniumOutput.html" class="external-link">XeniumOutput</a></span><span class="op">(</span><span class="st">"v2"</span>, file_path <span class="op">=</span> <span class="va">fp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> see ?SFEData and browseVignettes('SFEData') for documentation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> downloading 1 resources</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> retrieving 1 resource</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> loading from cache</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The downloaded files are in /tmp/RtmpUGEtoo/file834d40c00e8a/xenium2 </span>
<span class="r-in"><span><span class="co"># Weirdly the first time I get the null pointer error</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">sfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="readXenium.html">readXenium</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Cell segmentations are found in `.parquet` file(s)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell and nucleus segmentations</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Making MULTIPOLYGON nuclei geometries</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Making POLYGON cell geometries</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sanity checks on cell segmentation polygons:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; ..found 132 cells with (nested) polygon lists</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; ..applying filtering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Checking polygon validity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Saving geometries to parquet files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell metadata -&gt; `cells.parquet`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading h5 gene count matrix</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering cellSeg geometries to match 6272 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering nucSeg geometries to match 6158 cells with counts &gt; 0</span>
<span class="r-in"><span><span class="va">sfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="readXenium.html">readXenium</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Preprocessed sf segmentations found</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell and nucleus segmentations</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading cell metadata -&gt; `cells.parquet`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; Reading h5 gene count matrix</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering cellSeg geometries to match 6272 cells with counts &gt; 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt;&gt;&gt; filtering nucSeg geometries to match 6158 cells with counts &gt; 0</span>
<span class="r-in"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SpatialExperiment/man/imgData-methods.html" class="external-link">getImg</a></span><span class="op">(</span><span class="va">sfe</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="toExtImage.html">toExtImage</a></span><span class="op">(</span>resolution <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="va">img</span><span class="op">[</span>,,<span class="fl">1</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">500</span></span></span>
<span class="r-in"><span><span class="fu">Img</span><span class="op">(</span><span class="va">sfe</span>, image_id <span class="op">=</span> <span class="st">"mask"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">img</span></span></span>
<span class="r-in"><span><span class="fu"><a href="imageIDs.html">imageIDs</a></span><span class="op">(</span><span class="va">sfe</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "morphology_focus" "mask"            </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fn</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lambda Moses, Alik Huseynov, Lior Pachter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

